---
title: 【阅读笔记】深入理解JVM虚拟机：第三章
date: 2020-08-03 23:01:32
tags:
- JVM
- Java
categories: reading note
---
---
# **对象已死？**
---
## *1.垃圾回收算法介绍*
<!--more-->
### 引用计数算法
- 很难解决对象间相互循环引用的问题，当外部没有引用时无法GC

### 可达性分析算法
- 通过GC Roots作为起始点集，根据与GC Roots是否有引用链相连来判断是否需要回收
- 可作为GC Roots的对象：
    - 线程间共享的元数据（如方法区里的对象）
    - 线程启动以来的方法调用栈（如虚拟机栈和本地方法栈里引用的对象）

## *2.再谈引用*
- 强引用
    - 普通的引用赋值
    - 只要存在强引用关系就不会GC
- 软引用
    - 有用但非必须
    - 系统将要OOM前会进行回收
- 弱引用
    - 比软引用更弱的引用
    - 被弱引用关联的对象在下一次GC时就会被回收
- 虚引用
    - 设置虚引用只是为了其在GC时收到一个系统通知，不会对其他生存时间构成影响，也不能通过虚引用获取实例对象

## *3.生存还是死亡？*
- 可达性算法分析为不可达后的处理过程 P186
- 概述：不可达对象不会被立即回收，可以最多一次使用系统调用的**finalize()方法**重新建立引用来自救

---
# 垃圾收集算法
## *1.标记-清除算法*
- 标记需要回收的内存，直接进行清除
- 缺点：标记和清除的执行效率会随对象数量增长而降低；会产生大量不连续的内存碎片

## *2.标记-复制算法*
- 回收新生代内存的优先选择
- 缺点：因为会进行复制，在对象存活率较高时效率会降低，一般不在老年代对象中使用

## *3.标记-整理算法*
- 标记->将存货对象移动到内存空间另一端->清除存活边界以外的内存


